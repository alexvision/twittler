<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <script>

      $(document).ready(function(){
        var $body = $('body');
        $body.html('');
        $body.prepend('<h1>Twittler</h1>');
        $body.append('<button id="refresh">Refresh</button>');

        var addTweet = function(index){
          var tweet = streams.home[index];
          var $tweet = $('<div class="tweet"></div>');
          //var date = new Date(Date.now());
          $tweet.text('@' + tweet.user + ': ' + tweet.message  + " " + Date.now());//date.toLocaleString());
          return $tweet;
        };
        
        var index = streams.home.length - 1;
        while(index >= 0){
          addTweet(index).appendTo($body);
          index -= 1;
        }

        $('#refresh').on ('click', function(){
          var displayedTweetCount = $('.tweet').length - 1;
          for(var i = displayedTweetCount; i < streams.home.length; i++){
            //$body.prepend(addTweet(i));
            addTweet(i).insertAfter('#refresh')
          }
        });

      });

    </script>
  </body>
</html>
